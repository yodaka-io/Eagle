# Eagle

- MinecraftのPaperサーバーに導入するプラグインの実装
- MinecraftでTeamPvPを行うためのゲームマネジメントシステム


## ビルド手順

```shell
# ビルドは必ず以下のコマンドで行って下さい
./gradlew shadowJar
```

## 何を可能にするプラグインか

- MinecraftでTeamPvPがプレイできるようになります
- TeamPvPを行うために必要なゲームマネジメントシステムを提供するのがEagleプラグイン


## Minecraft Team PvP とは

- プレイヤーがチームに別れて戦闘を行うゲームモードです
- 類似サービスとして、JapanMinecraftPvP(JPMCPVP)やOvercast Network(oc.tc)があります
  - 本プロジェクトはJPMCPVPに強く影響を受けています


## 使用技術

- サーバーアプリケーションはPaper
- 原則Kotlinで実装する


## コア機能

- 以下は未実装の機能を含みます
- あくまで外から見て分かりやすい機能のリストであることに注意して下さい
  - 実装時のファイルやディレクトリを分ける単位ではありません

### PvPマップローテーションシステム

- PvPマップファイルを読み込み、事前に定義されたマップローテーションを回します
  - ローテーションには約10以上のマップが登録される予定です
  - 各マップ毎にゲームが行われます
- 各PvPマップは以下の情報を持っており、マップの読み込み時にこれらの情報を元に初期化とゲーム設定を行います
  - マップデータ (Minecraftのワールドデータ)
  - マップ定義データ
    - マップ名や説明文、バージョン、制作者などのメタデータ
    - ゲームモードやゲーム設定(チーム定義、アイテム、リスポーン地点等)
    - 保護範囲の定義(ブロック設置不可範囲や立入禁止エリア等)
- ローテーションが回りきったら（全てのマップでのゲームが終了したら）サーバーを再起動
  - 負荷対策が一番の目的


### ゲーム管理システム

- ローテーションシステムの一部とも言えるかもしれない
- 読み込んだマップファイルおよびマップ定義ファイル通りにゲームを進行する部分
- ゲームセッション管理（開始・終了・タイマー）
- プレイヤーのスポーン・リスポーン処理
- 勝利条件チェック（キル数・最後のチーム）
- プレイヤー死亡・退出イベント処理
- etc...


### チーム管理システム

- ゲームが開始されるまでのプレイヤー管理
  - 最低プレイヤー数の参加が確認できたらゲームを開始
- プレイヤーのチーム割り当て・自動振り分け
- チーム情報取得・管理


### コマンドシステム

- ゲームサーバー上で提供されるコマンドシステム
- 例
  - プレイヤーコマンド: `join`, `leave`, `stats`, `team`
  - 管理者コマンド: `forcestart`, `forceend`, `reload`, `map`


### UI管理システム

- サイドバー表示（ロビー・ゲーム・終了・移行画面）
- アクションバー更新
- ゲーム結果表示
- スコアボード管理
